
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>iBelong - Descriptors</title>
    <link rel="stylesheet" href="css/theme.css" type="text/css">
  </head>
  <body>
    <h1>Descriptors - By Detail</h1>
      <div>
        <ul>
        {{range .}}
                <li value="{{.ID}}" onclick="load(this)">{{.Detail}}
                <ul id="{{.ID}}" value="false"></ul></li>
        {{end}}
        </ul>
      <a href="/descriptors/create" class="button">Add</a>
      <a href="/descriptors/update" class="button">Edit</a>
      <a href="/descriptors/delete" class="button">Delete</a>
      </div>
      <a href="/" class="button">Home</a>
<script>
//  detail = {{.}};
function load(id) {
  if (document.getElementById(id.value).value == "true") {
      document.getElementById(id.value).innerHTML = "";
        document.getElementById(id.value).value="false";
  }else{
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange=function() {
      if (this.readyState == 4 && this.status == 200) {
        document.getElementById(id.value).innerHTML = "";
        json = JSON.parse(this.responseText);
        if (json.length == 0){
          document.getElementById(id.value).value="true";
          document.getElementById(id.value).innerHTML = '<p>No Descriptors for selected Detail exist.';
        }else{
          document.getElementById(id.value).value="true";
          var list = document.getElementById(id.value);
          for( index in json ){
            var value = json[index];
            var entry = document.createElement('li');
            entry.appendChild(document.createTextNode(value.descriptor));
            list.appendChild(entry);
          }
        }
      }
    };
    xhttp.open("GET", "http://localhost:9000/v1/details/" + id.value + "/descriptors", true);
    xhttp.send();
  }
}
</script>

  </body>
</html>
